# 3장. **파일**
  * [3-1 파일 정보 검색](#3-1-파일-정보-검색)

## 3-1 파일 정보 검색
*- 파일에 대한 읽기 권한 필요*  

1. 파일명을 파일 정보 검색  
int stat(const char *pathname, struct stat *statbuf)  
pathname : 정보를 알고자하는 파일명  
statbuf : 검색한 파일 정보를 저장할 구조체의 주소  
return value : 성공하면 0, 실패하면 -1  
  * [stat 구조체](#참고-stat-구조체)

2. 파일 기술자로 파일 정보 검색  
int fstat(int fd, struct stat *statbuf)  
fd : 열려있는 파일의 파일 기술자  
statbuf : 검색한 파일 정보를 저장할 구조체의 주소  
return value : 성공하면 0, 실패하면 -1  

##### (참고) stat 구조체  
``` c
struct stat {
  dev_t				st_dev;
  ino_t				st_ino;
  mode_t			st_mode;
  nlink_t			st_nlink;
  uid_t				st_uid;
  gid_t				st_gid;
  dev_t				st_rdev;
  off_t				st_size;
  blksize_t			st_blksize;
  blkcnt_t			st_blocks;
  struct timespec	st_atim;
  struct timespec	st_mtim;
  struct timespec	st_ctim;

  #define st_atime st_atim.tv_sec
  #define st_mtime st_mtim.tv_sec
  #define st_ctime st_ctim.tv_sec
};
```

st_dev : 파일이 저장되어 있는 장치의 번호  
st_ino : 파일의 inode 번호  
st_mode : 파일의 종류와 접근 권한  
st_nlink : 하드 링크의 개수  
st_uid : 파일 소유자의 UID  
st_gid : 파일 소유 그룹의 GID
st_rdev : 장치 파일일 경우 주장치의 번호와 부장치의 번호(장치 파일이 아니면 의미 없음)  
st_size :  
st_blksize : 파일 내용 입출력시 사용되는 버퍼의 크기  
st_blocks : 파일에 할당된 파일 시스템의 블록 수(블록의 크기느 512byte)  
st_atim : 마지막으로 파일을 읽거나 실행한 시간  
st_mtim : 마지막으로 파일의 내용을 변경한 시간  
st_ctim : 마지막으로 inode 내용을 변경한 시간  
*(inode 내용은 소유자/그룹, 파일 크기 링크개수 등이 변경될 때 바뀜)*  

*리눅스 커널 2.6 이전 버전과의 호환성을 위해 #define으로 타임스탬프 값을 매핑해서 정의함*  